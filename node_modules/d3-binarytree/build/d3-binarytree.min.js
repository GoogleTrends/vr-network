// https://github.com/vasturiano/d3-binarytree Version 0.1.2. Copyright 2017 Vasco Asturiano.
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function r(t,r,e){if(isNaN(r))return t;var n,i,o,h,s,u,a=t._root,f={data:e},l=t._x0,x=t._x1;if(!a)return t._root=f,t;for(;a.length;)if((h=r>=(i=(l+x)/2))?l=i:x=i,n=a,!(a=a[s=+h]))return n[s]=f,t;if(o=+t._x.call(null,a.data),r===o)return f.next=a,n?n[s]=f:t._root=f,t;do{n=n?n[s]=new Array(2):t._root=new Array(2),(h=r>=(i=(l+x)/2))?l=i:x=i}while((s=+h)==(u=+(o>=i)));return n[u]=a,n[s]=f,t}function e(t){var e,n,i=t.length,o=new Array(i),h=1/0,s=-(1/0);for(e=0;e<i;++e)isNaN(n=+this._x.call(null,t[e]))||(o[e]=n,n<h&&(h=n),n>s&&(s=n));for(s<h&&(h=this._x0,s=this._x1),this.cover(h).cover(s),e=0;e<i;++e)r(this,o[e],t[e]);return this}function n(t){for(var r=0,e=t.length;r<e;++r)this.remove(t[r]);return this}function i(t){return t[0]}function o(t,r){var e=new h(null==r?i:r,NaN,NaN);return null==t?e:e.addAll(t)}function h(t,r,e){this._x=t,this._x0=r,this._x1=e,this._root=void 0}function s(t){for(var r={data:t.data},e=r;t=t.next;)e=e.next={data:t.data};return r}var u=function(t){var e=+this._x.call(null,t);return r(this.cover(e),e,t)},a=function(t){if(isNaN(t=+t))return this;var r=this._x0,e=this._x1;if(isNaN(r))e=(r=Math.floor(t))+1;else{if(!(r>t||t>e))return this;var n,i,o=e-r,h=this._root;switch(i=+(t<(r+e)/2)){case 0:do{n=new Array(2),n[i]=h,h=n}while(o*=2,e=r+o,t>e);break;case 1:do{n=new Array(2),n[i]=h,h=n}while(o*=2,(r=e-o)>t)}this._root&&this._root.length&&(this._root=h)}return this._x0=r,this._x1=e,this},f=function(){var t=[];return this.visit(function(r){if(!r.length)do{t.push(r.data)}while(r=r.next)}),t},l=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},x=function(t,r,e){this.node=t,this.x0=r,this.x1=e},_=function(t,r){var e,n,i,o,h,s=this._x0,u=this._x1,a=[],f=this._root;for(f&&a.push(new x(f,s,u)),null==r?r=1/0:(s=t-r,u=t+r);o=a.pop();)if(!(!(f=o.node)||(n=o.x0)>u||(i=o.x1)<s))if(f.length){var l=(n+i)/2;a.push(new x(f[1],l,i),new x(f[0],n,l)),(h=+(t>=l))&&(o=a[a.length-1],a[a.length-1]=a[a.length-1-h],a[a.length-1-h]=o)}else{var _=Math.abs(t-+this._x.call(null,f.data));_<r&&(r=_,s=t-_,u=t+_,e=f.data)}return e},c=function(t){if(isNaN(o=+this._x.call(null,t)))return this;var r,e,n,i,o,h,s,u,a,f=this._root,l=this._x0,x=this._x1;if(!f)return this;if(f.length)for(;;){if((s=o>=(h=(l+x)/2))?l=h:x=h,r=f,!(f=f[u=+s]))return this;if(!f.length)break;r[u+1&1]&&(e=r,a=u)}for(;f.data!==t;)if(n=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,n?(i?n.next=i:delete n.next,this):r?(i?r[u]=i:delete r[u],(f=r[0]||r[1])&&f===(r[1]||r[0])&&!f.length&&(e?e[a]=f:this._root=f),this):(this._root=i,this)},d=function(){return this._root},v=function(){var t=0;return this.visit(function(r){if(!r.length)do{++t}while(r=r.next)}),t},p=function(t){var r,e,n,i,o=[],h=this._root;for(h&&o.push(new x(h,this._x0,this._x1));r=o.pop();)if(!t(h=r.node,n=r.x0,i=r.x1)&&h.length){var s=(n+i)/2;(e=h[1])&&o.push(new x(e,s,i)),(e=h[0])&&o.push(new x(e,n,s))}return this},g=function(t){var r,e=[],n=[];for(this._root&&e.push(new x(this._root,this._x0,this._x1));r=e.pop();){var i=r.node;if(i.length){var o,h=r.x0,s=r.x1,u=(h+s)/2;(o=i[0])&&e.push(new x(o,h,u)),(o=i[1])&&e.push(new x(o,u,s))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.x1);return this},w=function(t){return arguments.length?(this._x=t,this):this._x},N=o.prototype=h.prototype;N.copy=function(){var t,r,e=new h(this._x,this._x0,this._x1),n=this._root;if(!n)return e;if(!n.length)return e._root=s(n),e;for(t=[{source:n,target:e._root=new Array(2)}];n=t.pop();)for(var i=0;i<2;++i)(r=n.source[i])&&(r.length?t.push({source:r,target:n.target[i]=new Array(2)}):n.target[i]=s(r));return e},N.add=u,N.addAll=e,N.cover=a,N.data=f,N.extent=l,N.find=_,N.remove=c,N.removeAll=n,N.root=d,N.size=v,N.visit=p,N.visitAfter=g,N.x=w,t.binarytree=o,Object.defineProperty(t,"__esModule",{value:!0})});